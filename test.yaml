
substitutions:
  name: "xy6020"
  device_description: "Monitor and control a xy6020 Digital Control Power Supply via UART-TTL"
  
  tx_pin1: GPIO4
  rx_pin1: GPIO2

esphome:
  name: ${name}
  friendly_name: xy6020
  comment: ${device_description}
  project:
    name: "xy6020"
    version: 1.0.0
  
esp32:
  board: nodemcu-32s
    
# Enable logging
logger:
  level: DEBUG

# Enable Home Assistant API
api:
  encryption:
    key: !secret xykey
ota:
  password: !secret xyota

# web_server:
#  port: 9005

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  manual_ip:
    static_ip: 192.168.178.38
    gateway: 192.168.178.1
    subnet: 255.255.255.0

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "xy6020 Fallback Hotspot"
    password: "UEikMwV1wqU8"

captive_portal:

uart:
- id: uart_01
  baud_rate: 115200
  tx_pin: ${tx_pin1}
  rx_pin: ${rx_pin1}
  debug:
      direction: BOTH



sensor:
  name: Eingangsspannung
   unit_of_measurement: "V"
   icon: "mdi:water-percent"
   device_class: "temperature"
   state_class: "measurement"
   accuracy_decimals: 1
   expire_after: 30s
   filters:
   - sliding_window_moving_average:
      window_size: 15
      send_every: 15
